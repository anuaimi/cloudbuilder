#!/usr/bin/env ruby
# require 'optparse'

require 'cloudbuilder'

#make sure output is not buffered
$stdout.sync = true
$stderr.sync = true

options = {}

#debugger

# OptionParser.new do |opts|

# 	opts.banner = "Usage: cloudbuilder [command]"
# 	opts.separator ""
# 	opts.separator "Commands:"

# 	usage+= "    create - create a cloud solution"
# 	usage+= "    version - what version of clouldbuilder this is"
# 	usage+= "    help - print this summary\n"

# 	opts.on("-v", "--version", "print version") do |v|
# 		puts "version #{clouldBuilder::VERSION}"
# 		exit
# 	end

# end.parse!


if (ARGV.include?("help")) || (ARGV.count == 0)
	exit
end

if ARGV.include?("create")
	require 'yaml'

	puts "reading default yaml file and creating servers"

	#read config file
    #if have name use it, else assume 'default.yml'
    if (ARGV.count == 1)
        config_file = "sample.yml"
    else
        config_file = ARGV[2]
    end

	solution = begin
		YAML.load(File.open(config_file))
	rescue ArgumentError => e
		puts "Could not parse solution file - #{e.message}"
		exit
	end

	#validate file
	#make sure we have a solution
	debugger

    #solution[:name]
    #
	if !parsed.include?('solution')
		puts "solution "
	end
end


exit 1
